!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ScrollProgress=e()}(this,(function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s={selector:".scroll--progress",backgroundColor:"#EAEAEA",progressColor:"linear-gradient(to right, #ec008c, #fc6767)",clickToTop:!0,scrollOffset:50,onClick:function(){window.scroll({top:0,behavior:"smooth"})}};return function(){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t(this,r),this.settings=r.mergeSettings(e),this.selector="string"==typeof this.settings.selector?document.querySelector(this.settings.selector):this.settings.selector,!document.body.contains(this.selector))throw new Error("Something is wrong with your selector 🕵️‍♂️");var s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("class","progress-circle svg-content"),s.setAttribute("viewBox","-1 -1 102 102"),s.setAttribute("width","100%"),s.setAttribute("height","100%");var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d","M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"),s.appendChild(o),this.selector.appendChild(s),this.progressPath=document.querySelector("".concat(this.settings.selector," path")),this.pathLength=this.progressPath.getTotalLength()}var o,i,n;return o=r,n=[{key:"mergeSettings",value:function(t){var e=s;for(var r in t)e[r]=t[r];return e}}],(i=[{key:"mount",value:function(){return this.getScrollOffset(),this.progressStyles(),this.attachEvents(),this}},{key:"scrollHandler",value:function(){this.getScrollOffset();var t=this.pathLength-this.scrolled*this.pathLength/this.docHeight;return this.progressPath.style.strokeDashoffset=t,this.scrolled>this.settings.scrollOffset?this.selector.classList.add("active-progress"):this.selector.classList.remove("active-progress"),this}},{key:"clickHandler",value:function(){if(event.target.matches(this.settings.selector))return event.preventDefault(),this.scrolled>0&&this.settings.onClick(),this}},{key:"getScrollOffset",value:function(){return this.scrolled=document.body.scrollTop||document.documentElement.scrollTop,this.docHeight=document.documentElement.scrollHeight-document.documentElement.clientHeight,this}},{key:"attachEvents",value:function(){return document.addEventListener("scroll",this.scrollHandler.bind(this)),document.addEventListener("click",this.clickHandler.bind(this)),this}},{key:"progressStyles",value:function(){return this.progressPath.style.transition=this.progressPath.style.WebkitTransition="none",this.progressPath.style.strokeDasharray=this.pathLength+" "+this.pathLength,this.progressPath.style.strokeDashoffset=this.pathLength,this.progressPath.style.transition=this.progressPath.style.WebkitTransition="stroke-dashoffset 10ms linear",this}}])&&e(o.prototype,i),n&&e(o,n),r}()}));
