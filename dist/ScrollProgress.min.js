!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ScrollProgress=e()}(this,(function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s={selector:!1,backgroundColor:"rgba(255,255,255,0.2)",progressColor:"#ECEDF3",clickToTop:!0,scrollOffset:50,progressPathTransition:"10ms linear",onClick:function(){window.scroll({top:0,behavior:"smooth"})}};return function(){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,r),this.settings=r.mergeSettings(e),this.selector="string"==typeof this.settings.selector?document.querySelector(this.settings.selector):r.buildSelector()}var o,i,n;return o=r,n=[{key:"validateSelector",value:function(t){if(!document.body.contains(t))throw new Error("Something is wrong with your selector ðŸ•µï¸â€â™‚ï¸");return!0}},{key:"buildSelector",value:function(){var t=document.createElement("div");return t.className="js--scroll--progress",document.body.appendChild(t),t}},{key:"mergeSettings",value:function(t){var e=s;for(var r in t)e[r]=t[r];return e}}],(i=[{key:"mount",value:function(){return r.validateSelector(this.selector),this.buildSvg(),this.attachEvents(),this}},{key:"buildSvg",value:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("class","progress-circle"),t.setAttribute("viewBox","-1 -1 102 102"),t.setAttribute("width","100%"),t.setAttribute("height","100%");var e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d","M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"),t.appendChild(e),this.selector.appendChild(t),this.progressPath=e,this.pathLength=this.progressPath.getTotalLength(),this.progressPath.style.strokeDasharray=this.pathLength+" "+this.pathLength,this.progressPath.style.strokeDashoffset=this.pathLength,this.progressPath.style.transition="stroke-dashoffset ".concat(this.settings.progressPathTransition),this.progressPath.style.WebkitTransition="stroke-dashoffset ".concat(this.settings.progressPathTransition),this}},{key:"scrollHandler",value:function(){this.getScrollOffset();var t=this.pathLength-this.scrolled*this.pathLength/this.docHeight;return this.progressPath.style.strokeDashoffset=t,this.scrolled>this.settings.scrollOffset?this.selector.classList.add("active-progress"):this.selector.classList.remove("active-progress"),this}},{key:"clickHandler",value:function(){if(event.target===this.selector)return event.preventDefault(),this.scrolled>0&&"function"==typeof this.settings.onClick&&this.settings.onClick(),this}},{key:"getScrollOffset",value:function(){return this.scrolled=document.body.scrollTop||document.documentElement.scrollTop,this.docHeight=document.documentElement.scrollHeight-document.documentElement.clientHeight,this}},{key:"attachEvents",value:function(){document.addEventListener("scroll",this.scrollHandler.bind(this),!1),document.addEventListener("click",this.clickHandler.bind(this),!1)}}])&&e(o.prototype,i),n&&e(o,n),r}()}));
